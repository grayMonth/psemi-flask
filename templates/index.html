{% extends "base.html" %} {% block body %}
<div class="form-container mb-5">
  <h2 class="mb-4">新しいタスク</h2>
  <form action="/create" method="POST">
    <div class="mb-3">
      <input
        type="text"
        name="title"
        class="form-control input-large"
        placeholder="タイトルを入力..."
        required
      />
    </div>
    <div class="mb-3">
      <textarea
        name="details"
        class="form-control"
        rows="3"
        placeholder="詳細な説明をここに..."
      ></textarea>
    </div>
    <button type="submit" class="btn btn-primary btn-lg w-100 btn-custom">
      追加する
    </button>
  </form>
</div>

<div class="tasks-list">
  {% for task in tasks %}
  <div
    class="task-card d-flex justify-content-between align-items-center shadow-sm {% if task.done %}bg-light opacity-75{% endif %}"
  >
    <div class="d-flex align-items-center">
      <a
        href="/toggle/{{ task.id }}"
        class="btn btn-sm me-3 {{ 'btn-success' if task.done else 'btn-outline-secondary' }}"
      >
        {{ '✓' if task.done else '　' }}
      </a>

      <div
        class="{% if task.done %}text-decoration-line-through text-muted{% endif %}"
      >
        <div class="d-flex align-items-center mb-1">
          <span class="badge bg-secondary me-2">ID: {{ task.id }}</span>
          <h5 class="mb-0 fw-bold">{{ task.title }}</h5>
        </div>
        <p class="mb-0 small">{{ task.details }}</p>
      </div>
    </div>

    <div class="d-flex gap-2">
      {% if task.done %}
      <a
        class="btn btn-outline-secondary btn-sm btn-custom disabled"
        style="opacity: 0.5; cursor: not-allowed"
        aria-disabled="true"
        >編集</a
      >
      {% else %}
      <a
        href="/edit/{{ task.id }}"
        class="btn btn-outline-secondary btn-sm btn-custom"
        >編集</a
      >
      {% endif %}

      <a
        href="/delete/{{ task.id }}"
        class="btn btn-outline-danger btn-sm btn-custom"
        onclick="return confirm('本当に削除しますか？')"
        >削除</a
      >
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
